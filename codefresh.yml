version: "1.0"

steps:
  install:
    image: node
    working-directory:  ${{initial-clone}}
    commands:
      - npm install
  unit-test:
    image: huli/karma
    working-directory: ${{install}}
    commands:
      - npm test -- --browsers PhantomJS
#  integration-test:
#    image: node
#    working-directory: ${{install}}
#    commands:
#      - npm start &
#      - npm run e2e --
  dist:
    image: node
    working-directory: ${{install}}
    commands:
      - npm run dist
  image:
    type: build
    working-directory: ${{dist}}
    dockerfile: docker-dist/Dockerfile
    image-name: roy_angular2



